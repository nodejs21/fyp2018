<!-- ******************************** ADD ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** ADD ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** ADD ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** ADD ASSIGNMENTS PAGE TEACHER *****************************-->

<div class="col-sm-12">
  <mat-card>
    <div class="row">
      <div class="col-sm-3">
        <mat-form-field *ngIf="subject">
          <mat-label>Type</mat-label>
          <mat-select [(ngModel)]="assignmentsType">
            <mat-option (click)="getPostedAssignments()" value="Posted"
              >Posted</mat-option
            >
            <mat-option (click)="getSubmittedAssignments()" value="Submitted"
              >Submitted</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-3">
        <mat-form-field>
          <mat-label>Choose Academy</mat-label>
          <mat-select aria-disabled="!approvedRequests" [(ngModel)]="academyId">
            <mat-option
              *ngFor="let academy of approvedRequests; index as i"
              [value]="academy[i].data.academyId"
              (click)="getAcademyData(academy[i].data.academyId)"
              >{{ academy[i].data.academyName | titlecase }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-3">
        <mat-form-field>
          <mat-label>Choose Classroom</mat-label>
          <mat-select [(ngModel)]="classroomId">
            <mat-option>None</mat-option>
            <mat-option
              *ngFor="let classroom of classrooms"
              [value]="classroom.id"
              (click)="getAssignments(classroom)"
            >
              {{ classroom.data.class.className }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-3">
        <mat-form-field class="p-0">
          <mat-label>Subject</mat-label>
          <input matInput type="text" [(ngModel)]="subject" disabled />
        </mat-form-field>
      </div>
      <!-- <div class="col-sm-4">
        <button
          mat-button
          class="float-right btn btn-success"
          (click)="openDialog()"
        >
          Post Assignment
        </button>
      </div> -->
      <!-- <div class="col-sm-3">
        <mat-form-field>
          <mat-label>Choose Subject</mat-label>
          <mat-select>
            <mat-option>None</mat-option>
            <mat-option *ngFor="let classroom of classrooms">
              {{ classroom.data.subject.subjectName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div> -->
      <!-- <div class="col-sm-3">
        <mat-form-field>
          <mat-label>Assignment Title</mat-label>
          <mat-select>
            <mat-option>None</mat-option>
            <mat-option value="option1">Option 1</mat-option>
            <mat-option value="option2">Option 2</mat-option>
            <mat-option value="option3">Option 3</mat-option>
          </mat-select>
        </mat-form-field>
      </div> -->
    </div>
  </mat-card>

  <!-- <mat-card>
    <div class="row">
      <div class="col-11">
        <mat-card-title>
          Posted Assignments
        </mat-card-title>
      </div>

      <mat-form-field class="px-3">
        <input
          matInput
          (keyup)="applyFilter($event.target.value)"
          placeholder="Assignment title"
        />
      </mat-form-field>
      <div class="container">
        <table mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="assignmentNumber">
            <th mat-header-cell *matHeaderCellDef><strong>No.</strong></th>
            <td mat-cell *matCellDef="let element">
              {{ element.assignmentNumber + 1 }}
            </td>
          </ng-container>

          <ng-container matColumnDef="assignmentTitle">
            <th mat-header-cell *matHeaderCellDef><strong>Title</strong></th>
            <td mat-cell *matCellDef="let element">
              {{ element.assignmentTitle }}
            </td>
          </ng-container>

          <ng-container matColumnDef="addedDate">
            <th mat-header-cell *matHeaderCellDef><strong>Added On</strong></th>
            <td mat-cell *matCellDef="let element">
              {{ element.addedDate.toDate() | date: 'medium' }}
            </td>
          </ng-container>

          <ng-container matColumnDef="dueDate">
            <th mat-header-cell *matHeaderCellDef><strong>Due Date</strong></th>
            <td mat-cell *matCellDef="let element">
              {{ element.dueDate.toDate() | date: 'medium' }}
            </td>
          </ng-container>

          <ng-container matColumnDef="totalMarks">
            <th mat-header-cell *matHeaderCellDef>
              <strong>Total Marks</strong>
            </th>
            <td mat-cell *matCellDef="let element">{{ element.totalMarks }}</td>
          </ng-container>

          <ng-container matColumnDef="fileURL">
            <th mat-header-cell *matHeaderCellDef><strong>File URL</strong></th>
            <td mat-cell *matCellDef="let element">
              <a [href]="element.fileURL" download>
                <span>
                  <i class="text-success fa fa-download"> </i>
                </span>
              </a>
            </td>
          </ng-container>
          
          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </div>
  </mat-card> -->
</div>

<!-- ******************************** SUBMITTED ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** SUBMITTED ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** SUBMITTED ASSIGNMENTS PAGE TEACHER *****************************-->
<!-- ******************************** SUBMITTED ASSIGNMENTS PAGE TEACHER *****************************-->

<br />
<hr />
<br />
<div class="row" *ngIf="assignments">
  <div class="col-sm-12">
    <!-- <div class="card">
      <div class="card-header">
        <h3 class="d-inline">Submitted Assignments Page TEACHER</h3>
      </div>
    </div> -->
    <div class="animated fadeIn">
      <div class="card">
        <!-- <div class="card-header">
          <label for="className" class="font-weight-bold">{{}}</label>

          <div class="btn-group float-right" dropdown>
            <button
              id="button-basic"
              dropdownToggle
              type="button"
              class="btn btn-primary btn-sm"
            >
              Download All <span class="caret"></span>
            </button>
            <ul
              id="dropdown-basic"
              *dropdownMenu
              class="dropdown-menu"
              role="menu"
              aria-labelledby="button-basic"
            >
              <li role="menuitem">
                <a class="dropdown-item p-1 pl-2" href="#">Action</a>
              </li>
              <li role="menuitem">
                <a class="dropdown-item p-1 pl-2" href="#">Another action</a>
              </li>
              <li role="menuitem">
                <a class="dropdown-item p-1 pl-2" href="#"
                  >Something else here</a
                >
              </li>
              <li class="divider dropdown-divider"></li>
              <li role="menuitem">
                <a class="dropdown-item p-1 pl-2" href="#">Separated link</a>
              </li>
            </ul>
          </div>
        </div> -->
        <div>
          <table
            class="table table-striped table-hover table-responsive-sm table-responsive-md table-responsive-lg"
          >
            <thead>
              <tr>
                <!-- <th>Student Name</th> -->
                <th>No</th>
                <th>Title</th>
                <th>Due Date</th>
                <th>Posted On</th>
                <!-- <th>Obtained Marks</th> -->
                <th>Total Marks</th>
                <th>Status</th>
                <th class="text-center">Controls</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let assignment of assignments; index as i">
                <td>{{ i + 1 }}</td>
                <td>
                  {{
                    assignment.data.title ? assignment.data.title : "No Title"
                  }}
                </td>
                <td>
                  {{ assignment.data.dueDate.toDate() | date }}
                </td>
                <td>{{ assignment.data.createdOn.toDate() | date }}</td>
                <!-- <td>{{}}</td> -->
                <td>
                  {{
                    assignment.data.totalMarks ? assignment.data.totalMarks : 0
                  }}
                </td>
                <td><span class="badge badge-success">Posted</span></td>
                <td>
                  <div class="pl-2 pr-2 text-center">
                    <button
                      class="btn p-0"
                      matTooltip="View Assignment"
                      triggers="mouseenter:mouseleave"
                      (click)="viewDetails(assignment)"
                    >
                      <span>
                        <i class="text-info fa fa-eye "> </i>
                      </span>
                    </button>

                    <button
                      *ngIf="assignment.data.filePath"
                      class="btn p-0"
                      matTooltip="Download Assignment"
                      triggers="mouseenter:mouseleave"
                    >
                      <a [href]="assignment.data.filePath" download>
                        <span>
                          <i class="text-success fa fa-download"> </i>
                        </span>
                      </a>
                    </button>
                    <button
                      class="btn p-0"
                      matTooltip="Delete Assignment"
                      triggers="mouseenter:mouseleave"
                      (click)="deleteAssignment(assignment)"
                    >
                      <span>
                        <i class="text-danger fa fa-trash"> </i>
                      </span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
